{
    "homepage": "https://github.com/ShapeChange/ShapeChange",
    "description": "UML model transformation tool",
    "license": "GPL3",
    "url": "https://github.com/ShapeChange/ShapeChange/releases/download/4.0.0/ShapeChange-4.0.0.zip",
    "version": "4.0.0",
    "hash": "a323b6bda30a674fc5b8ae971621482c7424fb34347de1d2a7482ec01595b65d",
    "depends": [
        "java/openjdk21",
        "ea-lite"
    ],
    "pre_install": [
        "$wrapper = @'",
        "function Get-EA-Java-API {",
        "    $paths = @(",
        "        \"${env:ProgramFiles}\\Sparx Systems\\EA\",",
        "        \"${env:ProgramFiles}\\Sparx Systems\\EA LITE\"",
        "        \"${env:ProgramFiles}\\Sparx Systems\\EA Trial\"",
        "        \"$(scoop prefix ea-lite)\\Sparx Systems\\EA LITE\"",
        "    )",
        "",
        "    foreach ($p in $paths) {",
        "        if (Test-Path \"$p\\Java API\") {",
        "            return \"$p\\Java API\"",
        "        }",
        "    }",
        "",
        "    return $null",
        "}",
        "",
        "$api = Get-EA-Java-API",
        "$cmd = \"java\"",
        "if ($api) {",
        "    $cmd += \" `\"-Djava.library.path=$api`\"\"",
        "}",
        "$cmd += \" -jar `\"$PSScriptRoot\\ShapeChange-4.0.0.jar`\" $args\"",
        "",
        "Write-Host \"$cmd\"",
        "Write-Host \"\"",
        "",
        "Invoke-Expression $cmd",
        "'@",
        "$wrapper | Out-File \"$dir\\shapechange.ps1\" -Encoding ASCII"
    ],
    "bin": "shapechange.ps1"
}
